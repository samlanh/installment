<?php 
$tr = Application_Form_FrmLanguages::getCurrentlanguage();
$day = array(
		"Mon" =>'ច័ន្ទ',
		"Tue" =>'អង្គារ',
		"Wed" =>'ពុធ',
		"Thu" =>'ព្រហស្បតិ៍',
		"Fri" =>'សុក្រ',
		"Sat" =>'សៅរ៍',
		"Sun" =>'អាទិត្យ',
		);
$month = array("01"=>"មករា","02"=>"កុម្ភៈ","03"=>"មីនា","04"=>"មេសា","05"=>"ឧសភា","06"=>"មិថុនា","07"=>"កក្កដា","08"=>"សីហា","09"=>"កញ្ញា","10"=>"តុលា","11"=>"វិច្ឆិកា","12"=>"ធ្នូ",);
$dbparmeter = new Report_Model_DbTable_DbParamater();
$key = new Application_Model_DbTable_DbKeycode();
$dataterm = $key->getKeyCodeMiniInv(TRUE);
?>
<script>
dojo.require("dijit.form.DateTextBox");
</script>
<script src="<?php echo $this->baseUrl();?>/js/pdbs_js.js"  type="text/javascript"></script>
<meta charset="utf-8">
<title><?php echo $tr->translate("AGREEMENT");?></title>
<style>
	.reff{ font-size: 20px !important; line-height:34px !important;}
	#divPrint tr td h2,#divPrint p,#divPrint pre,#divPrint span,#divPrint td{ font-size: 20px !important; line-height:34px !important;}
	#padding-left-p-2{
	 padding-left: 105px !important;	
	}
	.padding-buttom{
		margin-top: -5px !important;
	}
	#printfooter{display: none !important;}
	#divPrint span.border_bt.value{
		font-size: 16px !important; 
	}
</style>
<div  id="exportword" style=" width:28cm;min-height:22cm; margin:0 auto;  padding:0px 0.5cm">
<table style="font-family: 'Khmer OS Content'; width:100%;"  >
	<tr>
    	<td align="center">
    		 <div id="divPrint" >
    	 		<style>		
					    #padding-left-p-2{
						 padding-left: 105px !important;	
						}
						.padding-buttom{
							margin-top: -5px !important;
						}
    	 				.reff{ font-size: 16px !important; line-height:34px !important;}
						tr td h2,p,pre,span{ font-size: 15px ; line-height:30px;}
						#padding-left{
						padding-left: 18px;
						}
						#bold-padding-right{
							margin-right: 15px;
							font-family: khmer os battambang;
							font-size:19px;
						}
						
						#padding-left-2{
						/*margin-top: -10px;*/
						padding-left:15px;
						}
						.padding-buttom{
							margin-top: -5px;
						}
						#padding-left-p-2{
						 margin-top:-1px; 
						 padding-left: 85px;	
						}
						#padding-left-p{
					    padding-left: 105px;
						}
						th{padding: 5px;}
						span.value{ line-height:12px;display: inline-block; text-align: center;}
						span.child {display:block; margin-left:25px; line-height: 25px;}
						span{line-height: 26px;}
						.value_label{
					        border-bottom: dashed 1px #000;
						    line-height: 12px !important;
						    min-width: 100%;
						    display: inline-block;
						}
						
						span.margin-left{
							margin-left:40px; display: inline-block;
						}
					div.watermark{
							top: 0; position: fixed; display: block; 
							background: url('<?php echo $this->baseUrl()."/images/watermark-soksan.png";?>') no-repeat center; 
					    	height: 100%;z-index: -1; width: 100%;  
							opacity: 0.15;
						}

    		</style>
    		<style>
				body {
				    position: relative;
				}
				#printfooter {
				    position: absolute;
				    bottom: 0;
				    position: fixed;
				    display: block ;
				    width: 100%;
				}
			 </style>
			 
			 <div>
    			<div class="watermark"></div>
	        	<table width="100%" style="font-family:'Times New Roman','Khmer OS Battambang';" style="padding:0;margin:0;border:0px;" >
	        	<tr>
	                <td width="30%" valign="top" align="center">
	                	<?php $imagelogo = $this->baseUrl()."/images/logo.jpg";
		                	if (!empty($this->agreement['project_logo'])){
		                		$imagelogo = $this->baseUrl()."/images/projects/".$this->agreement['project_logo'];
		                	}
		                	?>
		                	<br />
						     <img src="<?php echo $imagelogo;?>" style="max-width:100%; height: 80px; margin-top: 20px;">           	
	                	</td>
	                <td width="40%" >
	                </td>
	                <td width="30%" align="center">
		                <span style="text-align:center; line-height:28px; font-size:17px; font-family:'Khmer OS Battambang';">ព្រះរាជាណាចក្រកម្ពុជា</span>
		                <span style="text-align:center; line-height:28px; width: 100%; display: block; font-size:16px; font-family:'Khmer OS Battambang'"><?php echo $tr->translate("ជាតិ សាសនា ព្រះមហាក្សត្រ");?></span>
	                </td>
	             </tr> 
	             <tr>
	             	<td colspan="3">
	             		<span style="text-align:center; line-height:28px; width: 100%; display: block; font-size:16px; font-family:'Khmer OS Battambang'">កិច្ចសន្យា ទិញ/លក់ដី និង ផ្ទះ</span>
	             	</td>
	             </tr>
	             <!-- 
	              <tr>
	             	<td colspan="3">
	                	<span style="text-align:center; line-height:28px; width: 100%; display: block; font-size:16px; font-family:'Khmer OS Battambang'">កិច្ចសន្យាទិញ - លក់ដីឡូតិ៍ នេះត្រូវបានធ្វើឡើងនៅ <span style="display: inline-block;width: 100px;border-bottom: dashed 1px #000;"></span> ថ្ងៃទី  <?php //echo $dbparmeter->getNumberInkhmer(date("d",strtotime($this->agreement['agreement_date'])));?> ខែ <?php //echo $month[date("m",strtotime($this->agreement['agreement_date']))];?> ឆ្នាំ <?php //echo $dbparmeter->getNumberInkhmer(date("Y",strtotime($this->agreement['agreement_date'])));?> រវាង៖</span>
	             	</td>
	             </tr>
	              -->
	             <tr>
	             	<td colspan="3">
	             		<p style="font-family:'Khmer OS Battambang','Times New Roman',; text-align:justify; line-height:24px; font-size:14px; font-weight: normal !important;">
	             				<?php 
	             				$sex="ប្រុស";
	             				$title="លោក";
	             				if($this->agreement['p_sex']==2){
	             					$sex="ស្រី";
	             					$title="លោកស្រី";
	             				}?>
	             				ក្រុមហ៊ុនសាងសង់ផ្ទះល្វែងទំនើបធីវីស្តា(TV Star) មានទីតាំងបច្ចុប្បន្នស្ថិតនៅ<?php echo $this->agreement['project_location'];?> ចាប់ពីពេលនេះតទៅហៅថាភាគី(ក)បានព្រមព្រៀងលក់ផ្ទះលេខ<span class="value" style="text-align:center; min-width:70px;"><?php echo $this->agreement['property_title'];?></span> នៃគម្រោង<?php echo str_replace("គម្រោង", "", $this->agreement['project_name']);?>ស្ថិតនៅ<?php echo $this->agreement['project_location'];?>។
	             				<br />
		             			<span style="width: 100%; text-align:center; display: block; line-height: 32px;">
		             			អោយទៅ
		             			</span>
		             			<?php 
	             				$cussex="ប្រុស";
	             				if($this->agreement['sex']==2){
	             					$cussex="ស្រី";
	             				}
	             				$with_sex="ប្រុស";
	             				if($this->agreement['ksex']==2){
	             					$with_sex="ស្រី";
	             				}
	             				?>
		             			<span style="width: 100%; display: block; line-height: 32px;"> 
		             				<span class="margin-left">&nbsp;</span>
		             				ឈ្មោះ
		             				<span class="value" style="min-width:100px;font-family:'Khmer OS Muol Light';font-weight:200;"><?php echo $this->agreement['client_namekh'];?></span> ភេទ <?php echo $cussex;?> 
		             				សញ្ជាតិ <span class="value" style="min-width:30px;"><?php echo $this->agreement['client_nationality'];?></span> 
		             				ថ្ងែខែឆ្នាំកំណើត <?php if (!empty($this->agreement['dob'])){ echo $dbparmeter->getNumberInkhmer(date("d",strtotime($this->agreement['dob'])))." ខែ ".$month[date("m",strtotime($this->agreement['dob']))]." ឆ្នាំ  ".$dbparmeter->getNumberInkhmer(date("Y",strtotime($this->agreement['dob']))); }?>
		             				កាន់<?php echo $this->agreement['client_d_type'];?>លេខ<span class="value" style="min-width:80px;"><?php echo $dbparmeter->getNumberInkhmer($this->agreement['client_nation_id']);?></span> 
		             				<?php if(!empty($this->agreement['client_issuedateid'])){ ?> ចុះថ្ងៃទី <?php echo $dbparmeter->getNumberInkhmer(date("d",strtotime($this->agreement['client_issuedateid'])));?> ខែ <?php echo $month[date("m",strtotime($this->agreement['client_issuedateid']))];?> ឆ្នាំ <?php echo $dbparmeter->getNumberInkhmer(date("Y",strtotime($this->agreement['client_issuedateid']))); }?>
		             			 	ចាប់ពីថ្ងៃនេះតទៅហៅថាភាគី(ខ)។
								</span>   
								<?php
										$countland = 1;
		             				 if (!empty($this->agreement['old_land_id'])){
		             					$idse = explode(",", $this->agreement['old_land_id']);
		             					$countland = count($idse);
		             				}?>   		
		             			<span style="width: 100%; display: block; text-align: center;">ភាគីទាំងពីរបានព្រមព្រៀងគ្នាដូចខាងក្រោម</span>
		             			<span style="width: 100%; display: block; line-height: 32px;">
				             		<table width="100%" border="0"> 
				             			  <tr>
											    <td align="justify" style="vertical-align:top; text-align:center;width:7%;">ប្រការ១: </td>
											    <td align="justify" style="vertical-align:top;" >
											    	ភាគីទាំងពីរបានព្រមព្រៀងក្នុងតំលៃ  USD <strong><?php echo number_format($this->agreement['price_sold'],2);?> (<label id="lable_pricekhmer_land" style="font-family:'Khmer os battambang';"></label>ដុល្លារអាមេរិក) </strong>
											    	<script>
														a_sold ='<?php echo ($this->agreement['price_sold']) ?>';
														money_khmersold=read_money_in_khmer(a_sold);
														
														decimalmoney_khmersold='<?php echo substr(number_format($this->agreement['price_sold'],2),-2);?>';
														str_centsold = 'សេន';
														if(decimalmoney_khmersold>0){string_sold='និង';}else{string_sold="";str_cent_sold='';}
														last_number_sold='<?php echo substr(number_format($this->agreement['price_sold'],2),-2);?>';
														
														if(last_number_sold<=0){last_number_sold='';}
														money_khmersold = money_khmersold+" "+string_sold+" "+read_in_khmer_from_10_to_99(decimalmoney_khmersold)+''+read_in_khmer_from_0_to_9(last_number_sold)+''+str_cent_sold;
														dojo.byId('lable_pricekhmer_land').innerHTML=money_khmersold+" ";
													</script>
											    </td>  
										  </tr>
										  <tr>
										    <td align="justify" style="vertical-align:top; text-align:center;width:7%;">ប្រការ២: </td>
										    <td align="justify" style="vertical-align:top;" >
										  	  ភាគី(ក)ធានារត់ប្លង់រឹងចូលភាគី(ខ)ហើយភាគី(ក)ទទួលខុសត្រូវចំណាយទាំងស្រុង
										    </td>
										 </tr>
										 <tr>
										    <td align="justify" style="vertical-align:top; text-align:center;width:7%;">ប្រការ៣: </td>
										    <td align="justify" style="vertical-align:top;" >
										  	  ភាគី(ក)ធានាថាដីនិងផ្ទះដែលលក់ជូនភាគី(ខ)ជាដីស្របច្បាប់ដីមិនមានទំនាស់ មិនមែនជាដីដែលរដ្ឋហាមឃាត់និងមិនមែនជាដីសាធារណៈរបស់រដ្ឋនោះទេ។បើមាន  បញ្ហាកើតឡើងភាគី(ក)ហ៊ានទទួលខុសត្រួវចំពោះមុខច្បាប់ជាធរមាន។
										    </td>
										 </tr>
										 <tr>
										    <td align="justify" style="vertical-align:top; text-align:center;width:7%;">ប្រការ៤: </td>
										    <td align="justify" style="vertical-align:top;" >
										    	ក្នុងករណីភាគី(ខ)ខ្ចីប្រាក់ពីធនាគាបន្ទាប់ពីភាគី(ក)រត់ប្លង់រឹងចូលភាគី(ខ)រួចរាល់ហើយធនាគារសំរេចចុះបន្ទុកប្លង់រឹងនិងទម្លាក់ប្រាក់កម្ចីនោះភាគី(ខ)ត្រូវឯកភាពទូទាត់ប្រាក់ដែលនៅសល់ជូនភាគី(ក)អោយបានគ្រប់ចំនួន(បញ្ជាក់ៈក្នុងករណីធនាគារប្រែប្រួលមិនអោយខ្ចីប្រាក់វិញនោះភាគី(ក)និងមិនស៊ីដាច់ប្រាក់ដែលភាគី(ខ)បានទូទាត់នោះទេដោយសំរួលអោយភាគី(ខ)ត្រូវបង់ការប្រាក់ជូនបុរីចំពោះប្រាក់ដែលនៅសល់នៃអត្រាការប្រាក់មួយភាគរយ(១%)ក្នុងមួយខែ។
										    </td>
										 </tr>
										 <tr>
										    <td align="justify" style="vertical-align:top; text-align:center;width:7%;">ប្រការ៥: </td>
										    <td align="justify" style="vertical-align:top;" >
										   		 ការសាងសង់ត្រូវបញ្ចប់ក្នុងរយៈពេល២៤ខែគិតចាប់ពីថ្ងៃធ្វើកិច្ចសន្យានេះតទៅ។
										    </td>
										 </tr>
										 <tr>
										    <td align="justify" style="vertical-align:top; text-align:center;width:7%;">ប្រការ៦: </td>
										    <td align="justify" style="vertical-align:top;" >
										   		 លក្ខខ័ណ្ឌទូទាត់ប្រាក់ភាគី(ខ)ព្រមព្រៀងតាមដំណាក់កាលដូចខាងក្រោម:
										    </td>
										 </tr>
									</table>
			             		</span>
			             		<div style="width: 100%; display: block; line-height: 32px;">
			             			<div class="padding-buttom">
			             				<strong style="font-family:'Khmer OS Muol Light';font-weight:200;">ប្រការ ២ :<span id="padding-left-2">លក្ខខណ្ឌទូទាត់</span></strong>
			             			</div>
			             			<table width="100%" border="0">
											  <?php 
											    	$dbs = new Loan_Model_DbTable_DbLandpayment();
											    	$resultdeposit = $dbs->getDepositFirstPaymentMoney($this->agreement['id']);
											    	$reset_start = 0;
											    	$paid = 0;
											    	if(!empty($resultdeposit) AND !empty($this->sale_schedule)){
											    		$reset_start=1;
											    	?>
											  	<tr>
												    <td align="justify" style="vertical-align:top; text-align:right;width:5%;"></td>
												    <td align="justify" style="padding-left:5px">
												    	<ol style="list-style-type: none;text-align:justify;padding:0;" start="0">
								             				<li>
									             				<ul style="list-style-type: square;text-align:justify; margin-left: -20px" start="1">
										             				
									             					<?php 
												             			$start_id=0;
												             			$paid_amount=0;
												             			$rowpaid = $dbs->getPaymentPayoff($this->agreement['id']);
												             			$paid_payoff = $rowpaid['outstanding'];
												             			$keystart=0;
												             		?>
												             			<?php if(!empty($resultdeposit)){?><!-- ករណីកកច្រើនដង ចេញប្រវត្តិបង់ -->
												             			<?php foreach($resultdeposit as $keydeposite =>$rsdeposite){$keystart++;?>
												             			<li >
													             			<span>
														             			<!-- <strong>ដំណាក់កាលទី<?php //echo $dbparmeter->getNumberInkhmer($keystart);?>៖</strong> -->
														             			ភាគី<strong>”ខ”</strong> បានកក់ប្រាក់ចំនួន USD <span class="value" style="min-width:250px;font-family:Arial;font-weight: bold;"><?php echo @number_format($rsdeposite['total_principal_permonthpaid'],2);?>
													             				(<label style="font-family:'Khmer OS Battambang'" id="lable_depositpaid<?php echo $keydeposite+1;?>"></label><span  style="font-family:'Khmer OS Battambang'">ដុល្លាអាមេរិក</span>)</span> 
													             				ជូនភាគី<strong>”ក”</strong>
														             			 នៅថ្ងៃទី <?php echo $dbparmeter->getNumberInkhmer(date("d",strtotime($rsdeposite['date_input'])))." ខែ ".$month[date("m",strtotime($rsdeposite['date_input']))]." ឆ្នាំ ".$dbparmeter->getNumberInkhmer(date("Y",strtotime($rsdeposite['date_input']))); ?>។ 
												             				</span>
												             				 <script>
																				a ='<?php echo ($rsdeposite['total_principal_permonthpaid']) ?>';
																				money_khmer=read_money_in_khmer(a);
																				decimalmoney_khmer='<?php echo substr(number_format($rsdeposite['total_principal_permonthpaid'],2),-2);?>';
																				str_cent = 'សេន';
																				if(decimalmoney_khmer>0){string='និង';}else{string="";str_cent='';}
																				
																				last_number='<?php echo substr(number_format($rsdeposite['total_principal_permonthpaid'],2),-2);?>';
																				
																				if(last_number<=0){last_number='';}
																				money_khmer = money_khmer+" "+string+" "+read_in_khmer_from_10_to_99(decimalmoney_khmer)+''+read_in_khmer_from_0_to_9(last_number)+''+str_cent;
																				dojo.byId('lable_depositpaid<?php echo $keydeposite+1;?>').innerHTML=money_khmer;
																			</script>
																			<?php 
																			$paid_amount = $paid_amount+$rsdeposite['total_principal_permonthpaid'];
												             				}
												             		?>
												             		</li>
												             	<?php 	}?>
												             				
												             				<?php 
														             			$i=0; $numrow = 0;
														             			$countSchdule = count($this->sale_schedule);
														             			if (!empty($this->sale_schedule))  foreach ($this->sale_schedule as $key=> $row){$i++; ?>
														             			<?php 
														             			if($row['is_completed']==1 AND $this->agreement['is_reschedule']==3){continue;}
														             			$paid = $paid+$row['principal_permonth'];?>             	
														             			
														             			<?php //if ($row['principal_permonth']==$paid){
// 															             				continue;
// 															             			}
															             		?>   
														             			<?php if($key==0){?>
															             		<?php
															             			if($row['date_payment']==$this->agreement['buy_date'] AND $paid_amount==$row['principal_permonth'] ){
															             				continue;
															             			}
														             				$paidbefore = $row['principal_permonth']-$paid_amount;
														             				if(strlen($paidbefore)<=3){
														             					$row['principal_permonth']=number_format($paidbefore,2);
														             				}else{
														             					$row['principal_permonth'] = ($paidbefore);
														             				}
														             			}?>
														             			
													             			<li>
														             			<?php $keystart++; 
														             				$numrow=$numrow+1;?>
														             				
														             				<?php 
														             				$timepaylalel="ភាគី<strong>”ខ”</strong> បានកក់ប្រាក់លើកទី".$dbparmeter->getNumberInkhmer($keystart)." ចំនួន";
														             				$labelii="ជូនភាគី<strong>”ក”</strong>";
																						if($row['last_optiontype']==1){//by date
																							if($row['ispay_bank']==0){
																								$stringLastDate="នៅថ្ងៃទី ".$dbparmeter->getNumberInkhmer(date("d",strtotime($row['date_payment'])))." ខែ ".$month[date("m",strtotime($row['date_payment']))]." ឆ្នាំ ".$dbparmeter->getNumberInkhmer(date("Y",strtotime($row['date_payment'])));
																								
																							}else{
																								$stringLastDate = $row['payment_type']." ".$row['note'];
																							}
																						}else{//by last payment
																							//$stringLastDate = $tr->translate("RECEIVED_PROPERTY");
																							$stringLastDate = $row['payment_type']." ".$row['note'];
																						}
																						
																						$timepaylalel="លើកទី".$dbparmeter->getNumberInkhmer($keystart);
																						if (count($this->sale_schedule) == $key+1){
																							$timepaylalel="ទឹកប្រាក់នៅសល់ចំនួន";
																							$labelii="ភាគី<strong>”ខ”</strong> ត្រូវបង់ជូន ភាគី<strong>”ក”</strong>";
																						}
																					?>
														             				<span>
														             				<?php if($this->agreement['payment_id']==2){?>
															             					<?php if ($countSchdule==$key+1){?>
															             					<?php echo $timepaylalel;?> USD 
																             				<span class="value" style="min-width:250px;font-family:Arial;font-weight: bold;"><?php echo @number_format($row['principal_permonth'],2);?>
																             				(<label style="font-family:'Khmer OS Battambang'" id="lable_depositkhmer<?php echo $i;?>"></label><span  style="font-family:'Khmer OS Battambang'">ដុល្លាអាមេរិក)</span>
																             				</span>
																             				<?php echo $labelii;?>
																             				<?php echo $stringLastDate;?>  
																             				ជាប្រាក់បង់ផ្តាច់ថ្លៃទិញដីឡូតិ៍ ។ 
															             					<?php }?>
													             					<?php }else{?>
													             					<?php echo $timepaylalel;?> USD 
														             				<span class="value" style="min-width:250px;font-family:Arial;font-weight: bold;"><?php echo @number_format($row['principal_permonth'],2);?>
														             				(<label style="font-family:'Khmer OS Battambang'" id="lable_depositkhmer<?php echo $i;?>"></label><span  style="font-family:'Khmer OS Battambang'">ដុល្លាអាមេរិក)</span>
														             				</span>
														             				<?php echo $labelii;?>
														             				<?php echo $stringLastDate;?>  
														             				 ។
														             				<?php }?>
														             				</span>
														             				 <script>
																						a ='<?php echo ($row['principal_permonth']) ?>';
																						money_khmer=read_money_in_khmer(a);
																						decimalmoney_khmer='<?php echo substr(number_format($row['principal_permonth'],2),-2);?>';
																						str_cent = 'សេន';
																						if(decimalmoney_khmer>0){string='និង';}else{string="";str_cent='';}
																						
																						last_number='<?php echo substr(number_format($row['principal_permonth'],2),-2);?>';
																						
																						if(last_number<=0){last_number='';}
																						money_khmer = money_khmer+" "+string+" "+read_in_khmer_from_10_to_99(decimalmoney_khmer)+''+read_in_khmer_from_0_to_9(last_number)+''+str_cent;
																						dojo.byId('lable_depositkhmer<?php echo $i;?>').innerHTML=money_khmer;
																					</script>
																					
														             				<?php 
														                       }?>
													                       </li>
												                         <?php if($this->agreement['payment_id']==4){?>
												                         <li>
											             					ប្រាក់នៅសល់ចំនួន USD <span class="value" style="min-width: 50px;"><strong><?php echo number_format(($this->agreement['price_sold']-$paid),2);?></strong></span>(<span class="value" style="min-width: 50px; font-weight: bold;"><span id="lable_remainkhmer" style="font-family: 'Times New Roman','Khmer OS Battambang'"></span> ដុល្លារអាមេរិក</span>)
																		  	ភាគី<strong>”ខ”</strong> ត្រូវបង់រំលស់ជូនភាគី<strong>”ក”</strong> ក្នុងរយៈពេល <strong><?php echo $dbparmeter->getNumberInkhmer(number_format($this->agreement['total_duration'],0)); ?></strong>
																		  	 <?php if($this->agreement['payment_id']!=4){
																					echo $tr->translate("MONTH");
																				}else{
																					echo ($dataterm['install_by']==12)?$tr->translate("ឆ្នាំ"):$tr->translate("ខែ");
																			}?> 
																		  	<!--   ចាប់ផ្ដើមបង់ចាប់ពីថ្ងៃទី <?php //echo $dbparmeter->getNumberInkhmer(date("d",strtotime($this->agreement['first_payment'])));?> ខែ <?php echo $month[date("m",strtotime($this->agreement['first_payment']))];?> ឆ្នាំ <?php //echo $dbparmeter->getNumberInkhmer(date("Y",strtotime($this->agreement['first_payment'])));?> -->
																		            តាមតារាងបង់ប្រាក់រំលស់(ឧបសម្ព័ន១)។
																		         <script>
																				     <?php $remain = $this->agreement['price_sold']-$paid;?>
																					a ='<?php echo $remain; ?>';
																					money_khmer=read_money_in_khmer(a);
																					decimalmoney_khmer='<?php echo substr(number_format($remain,2),-2);?>';
																					str_cent = 'សេន';
																				
																					if(decimalmoney_khmer>0){string='និង';}else{string="";str_cent=""}
																					
																					last_number='<?php echo substr(number_format($remain,2),-1);?>';
																					
																					if(last_number<=0){last_number='';}
																					money_khmer = money_khmer+" "+string+" "+read_in_khmer_from_10_to_99(decimalmoney_khmer)+''+read_in_khmer_from_0_to_9(last_number)+''+str_cent;
																					dojo.byId('lable_remainkhmer').innerHTML=money_khmer;
																				</script>
											             					</li>
											             					<li>
											             					ភាគី<strong>”ខ”</strong> ត្រូវបង់ប្រាក់ប្រចាំខែជូនភាគី<strong>”ក”</strong> អោយបានទៀងទាត់រៀងរាល់ថ្ងៃទី<span style="display: inline-block; min-width: 50px; text-align: center;"><?php echo $dbparmeter->getNumberInkhmer(date("d",strtotime($this->agreement['first_payment'])));?></span>នៃខែនីមួយៗតាម តារាងបង់ប្រាក់ដែលភ្ជាប់មកជាមួយ <strong>(បញ្ជាក់ ៖ ការបង់រំលស់ក្នុងតារាង គឺពុំមានការប្រាក់ទេ)</strong> ។
											             					</li>
											                         <?php }?>
									             				</ul>
								             				</li>
								             			</ol>
												    </td>  
											  </tr>
											  <?php }?>
			             			</table>
			             		</div>
			             		<div style="width: 100%; display: block; line-height: 32px;">
			             			<div class="padding-buttom">
			             				<strong style="font-family:'Khmer OS Muol Light';font-weight:200;">ប្រការ ៣ :<span id="padding-left-2">ការបំពានកាតព្វកិច្ចបង់ប្រាក់</span></strong>
			             			</div>
			             			<table width="100%" border="0"> 
									  <tr>
										    <td align="justify" style="vertical-align:top; text-align:right;width:9%;"></td>
										    <td align="justify" style="padding-left:5px">
											  	  ប្រសិនបើ ភាគី<strong>”ខ”</strong> មានការយឺតយ៉ាវក្នុងការបង់ប្រាក់ប្រចាំខែនោះនឹងត្រូវពិន័យដូចខាងក្រោមៈ<br />
											   - យឺតចាប់ពី <strong>6 - 30</strong> ថ្ងៃពិន័យ <strong>$10</strong> ក្នុងមួយថ្ងៃ<br />
											   	ប្រសិនបើការបង់ប្រាក់ទាំងអស់ដែលភាគី<strong>”ខ”</strong> ផុតកំណត់រយៈពេល ៣០ថ្ងៃភាគី<strong>”ខ”</strong> នៅតែមិនបង់ប្រាក់ប្រចាំខែជូនភាគី<strong>”ក”</strong>ទៀតនោះ ប្រាក់ទាំងអស់ដែលភាគី<strong>”ខ”</strong> បានបង់ជូនភាគី<strong>”ក”</strong> នឹងត្រូវចាត់ទុកជា មោឃៈ ហើយកិច្ចសន្យានេះនឹងត្រូរំលាយចោលជាស្វ័យប្រវត្តិ។ក្នុងករណីនេះ ភាគី <strong>"ក"</strong> មានសិទ្ធិចាត់ចែងលក់ដីឡូតិ៍នេះលក់ទៅអោយអ្នកដទៃបានដោយអ្នកទិញភាគី<strong>”ខ”</strong> គ្មានសិទ្ធិតវ៉ាឡើយ។ 
											   <br /> 
											   - ករណី ភាគី<strong>"ក"</strong> កែប្រែឈប់លក់វិញនោះ ភាគី<strong>"ក"</strong> នឹងត្រូវសងការខូចខាតជូន ភាគី<strong>”ខ”</strong>  វិញនូវចំនួនទឹកប្រាក់ 1គុណនឹង2នៃចំនួនទឹកប្រាក់ដែល ភាគី<strong>”ខ”</strong>  បានបង់ជូន ភាគី<strong>”ក”</strong> ។
										 	</td>
									  </tr>
									</table>
								</div>
								<div style="width: 100%; display: block; line-height: 32px;">
			             			<div class="padding-buttom">
			             				<strong style="font-family:'Khmer OS Muol Light';font-weight:200;">ប្រការ ៤ :<span id="padding-left-2">ករណីយកិច្ច និង កិច្ចធានារបស់ភាគី</span></strong>
			             			</div>
			             			<table width="100%" border="0"> 
									  <tr>
										    <td align="justify" style="vertical-align:top; text-align:right;width:9%;"></td>
										    <td align="justify" style="padding-left:5px">
										    - ភាគី<strong>"ក"</strong> ត្រូវធ្វើលិខិតផ្ទេរសិទ្ធិដីធ្លី(ផ្ទេរសិទ្ធិត្រឹម ភូមិ ឃុំ)ជូនក្រោយពេល ភាគី<strong>"ខ"</strong> បានបង់ប្រាក់គ្រប់ចំនួនជូន ភាគី<strong>"ក"</strong> រួច។<br />
										    - (ភាគី<strong>"ខ"</strong>)  អ្នកទិញអាចមានសិទ្ធិសាងសង់ផ្ទះ, អាគារនៅលើដីឡូតិ៍បន្ទាប់ពីបានបង់ប្រាក់បាន ៧០%ឡើងទៅហើយរាល់ការសាងសង់ត្រូវមានការព្រមព្រៀងពីអាជ្ញាធរដែនដីដែលបានកំណត់ នឹងត្រូវ ផ្ដល់ព័តមាន អោយអ្នកលក់(ភាគី <strong>"ក"</strong>) ដឹងជាមុនសិន។
										    </td>
									  </tr>
									</table>
								</div>
								<div style="width: 100%; display: block; line-height: 32px;">
			             			<div class="padding-buttom">
			             				<strong style="font-family:'Khmer OS Muol Light';font-weight:200;">ប្រការ ៥ :<span id="padding-left-2">ការស្នងបន្ត៖ </span></strong>
			             			</div>
			             			<table width="100%" border="0"> 
									  <tr>
										    <td align="justify" style="vertical-align:top; text-align:right;width:9%;"></td>
										    <td align="justify" style="padding-left:5px">
										    <span class="margin-left">&nbsp;</span>
										    រាល់សិទ្ធិ និងករណីយកិច្ចទាំងអស់របស់<strong>អ្នកទិញ</strong> ដែលមានក្នុងកិច្ចសន្យានេះ នឹងមានអនុភាពផងដែរចំពោះទាយាទ អ្នកស្នងបន្ត និង អ្នកទទួលសិទ្ធិរបស់<strong>អ្នកទិញ</strong> តាមរយៈលិខិតជាលាយលក្ខណ៍អក្សរមានសាក្សីដឹងឭ ឬ មេធាវីបញ្ជាក់។ ដោយឡែក ប្រសិនបើមានហេតុការណ៍អាក្រក់ណាមួយកើតឡើងចំពោះ<strong>អ្នកលក់</strong> នោះសិទ្ធិ និងករណីយកិច្ចទាំងអស់របស់<strong>អ្នកលក់</strong> នឹងត្រូវបានទៅលើទាយាទ ឬអ្នកស្នងបន្ត ឬក៍អ្នកទទួលសិទ្ធិរបស់<strong>អ្នកលក់</strong> តាមរយៈលិខិតជាលាយលក្ខណ៍អក្សរមានសាក្សីដឹងឭ ឬមេធាវីបញ្ជាក់ដឹងឭ។
										    </td>
									  </tr>
									</table>
								</div>
								<div style="width: 100%; display: block; line-height: 32px;">
			             			<div class="padding-buttom">
			             				<strong style="font-family:'Khmer OS Muol Light';font-weight:200;">ប្រការ ៦ :<span id="padding-left-2">ច្បាប់គ្រប់គ្រង និងដំណោះស្រាយវិវាទ ៖  </span></strong>
			             			</div>
			             			<table width="100%" border="0"> 
									  <tr>
										    <td align="justify" style="vertical-align:top; text-align:right;width:9%;"></td>
										    <td align="justify" style="padding-left:5px">
										    - កិច្ចសន្យានេះគ្រប់គ្រងដោយច្បាប់នៃព្រះរាជានាចក្រកម្ពុជា។<br />
										   	- ភាគីទាំងពីរយល់ព្រមដោះស្រាយជម្លោះដោយសំរុះសំរួលគ្នាដោយសន្តិវិធីនៅប្រទេសកម្ពុជា។ ករណីការសំរុះសំរួលពុំបាន ភាគីទាំងពីរយល់ព្រមដាក់ជម្លោះដែលកើតចេញពីកិច្ចសន្យានេះ ជូនតុលាការនៃព្រះរាជាណាចក្រកម្ពុជាដើម្បីដោះស្រាយ។
										    </td>
									  </tr>
									</table>
								</div>
								<div style="width: 100%; display: block; line-height: 32px;">
			             			<div class="padding-buttom">
			             				<strong style="font-family:'Khmer OS Muol Light';font-weight:200;">ប្រការ ៧ :<span id="padding-left-2">សុពលភាពនៃកិច្ចសន្យា</span></strong>
			             			</div>
			             			<table width="100%" border="0"> 
									  <tr>
										    <td align="justify" style="vertical-align:top; text-align:right;width:9%;"></td>
										    <td align="justify" style="padding-left:5px">
										    <span class="margin-left">&nbsp;</span>
										  	 កិច្ចព្រមព្រៀងនេះជាកិច្ចព្រមព្រៀងទាំងមូលរបស់(ភាគី <strong>"ក"</strong>) និង (ភាគី <strong>"ខ"</strong>)។  រាល់កិច្ចព្រមព្រៀងដែលផ្ទុយពីកិច្ចសន្យាខាងលើមុនៗទាំងអស់ត្រូវទុកជាមោឃៈ។ ហើយការកែប្រែកិច្ចសន្យានេះ មិនត្រូវមានប្រសិទ្ធិភាពឡើយ លើកលែងតែធ្វើឡើងជាលាយលក្ខណ៍អក្សរហើយផ្តិតមេដៃដោយ (ភាគី <strong>"ក"</strong> ) និង (ភាគី<strong> "ខ"</strong>) ព្រមទាំងសាក្សីដឹងឭ។ ភាគីអ្នកលក់ <strong>"ក"</strong>  និង ភាគីអ្នកទិញ <strong>"ខ"</strong> សូមផ្តិតមេដៃស្តាំទុកជាភស្តុតាងដូចខាងក្រោម ៖
										    </td>
									  </tr>
									</table>
								</div>
	             	</td>
	             </tr>
	             <tr>
	             	<td colspan="3">
	             		<p style=" text-align: right;">
	             			ធ្វើនៅ<span style="display: inline-block;width: 100px;border-bottom: dashed 1px #000;"></span>ថ្ងៃទី<span class="value" style="min-width:30px;"> <?php echo $dbparmeter->getNumberInkhmer(date("d",strtotime($this->agreement['agreement_date'])));?></span>ខែ <span class="value" style="min-width:30px;"> <?php echo $month[date("m",strtotime($this->agreement['agreement_date']))];?></span> ឆ្នាំ <span class="value" style="min-width:30px;"> <?php echo $dbparmeter->getNumberInkhmer(date("Y",strtotime($this->agreement['agreement_date'])));?></span>
	             		</p>
	             		<p>
	             			<div style="white-space:nowrap;  font-family:'Khmer OS Muol Light'; width:24%; text-align: center; display: inline-block;">
	             				<span class="value">ស្នាមមេដៃ ភាគី " ខ "</span>
	             			</div>
	             			<div style=" font-family:'Khmer OS Muol Light'; width:24%; text-align: center; display: inline-block;">
	             				<span class="value">សាក្សីទី១</span>
	             			</div>
	             			<div style=" font-family:'Khmer OS Muol Light'; width:24%; text-align: center; display: inline-block;">
	             				<span class="value">សាក្សីទី២</span>
	             			</div>
	             			<div style="white-space:nowrap;  font-family:'Khmer OS Muol Light'; width:24%; text-align: center; display: inline-block;">
	             				<span class="value">ភាគី " ក "</span>
	             			</div>
	             			<div style="height: 90px;">
	             			</div>
	             			<div style="font-size:12px !important; width:24%;text-align: center; display: inline-block;">
	             				<span class="border_bt  value" style="font-size:12px; font-family:'Khmer OS Muol Light'; width:80%;white-space: nowrap;text-align: center;" >ឈ្មោះ &nbsp;&nbsp;<?php echo $this->agreement['client_namekh'];//echo (!empty($this->agreement['hname_kh']))?"/".$this->agreement['hname_kh']:"";?>&nbsp;</span>
	             			</div>
	             			<div style="font-size:12px; width:24%; text-align: center; display: inline-block;">
	             				<span class="border_bt  value" style="font-size:12px; display: inline-block; width: 15%; font-family:'Khmer OS Muol Light';">ឈ្មោះ</span>
	             				<span class="border_bt  value" style="width:80%;font-family:'Khmer OS Muol Light';border-bottom: dashed 1px #000;">&nbsp;</span>
	             			</div>
	             			<div style=" width:24%; text-align: center; display: inline-block;">
	             				<span class="border_bt  value" style="font-size:12px; display: inline-block; width: 15%; font-family:'Khmer OS Muol Light';">ឈ្មោះ</span>
	             				<span class="border_bt  value" style="width:80%;font-family:'Khmer OS Muol Light';border-bottom: dashed 1px #000;">&nbsp;</span>
	             			</div>
	             			<div style="font-size:12px; width:24%; text-align: center; display: inline-block;">
	             				<span class="border_bt  value" style=" font-size:12px; font-family:'Khmer OS Muol Light'; width:80%;" >ឈ្មោះ &nbsp;&nbsp;<?php echo $this->agreement['user_name'];?></span>
	             			</div>
	             		</p>
	             	</td>
	             </tr>
	             <tr>
	             	<td colspan="3">
	             		<table width="100%" border="0" style="font-family:'Khmer OS Muol Light'; font-size: 14px;">
	             			<tr>
	             				<td width="50%" align="center">
	             					<br />
	             					លេខៈ<span style="display: inline-block;width: 100px;border-bottom: dashed 1px #000;"></span><br />
	             					បានឃើញ និង បញ្ចាក់ថា<br />
	             					ហត្ថលេខាខាងស្ដាំពិតជារបស់<br />
	             					លោកមេភូមិប្រាកដមែន។<br />
	             					ថ្ងៃទី<span style="display: inline-block;width: 160px;border-bottom: dashed 1px #000;"></span>ខែ <span style="display: inline-block;width: 50px;border-bottom: dashed 1px #000;"></span> ឆ្នាំ <span style="display: inline-block;width: 50px;border-bottom: dashed 1px #000;"></span>
	             					<br />
	             					ធ្វើនៅ<span style="display: inline-block;width: 100px;border-bottom: dashed 1px #000;"></span>ថ្ងៃទី<span class="value" style="min-width:30px;"> <?php //echo $dbparmeter->getNumberInkhmer(date("d",strtotime($this->agreement['agreement_date'])));?></span>ខែ <span class="value" style="min-width:30px;"> <?php //echo $month[date("m",strtotime($this->agreement['agreement_date']))];?></span> ឆ្នាំ <span class="value" style="min-width:30px;"> ២០<?php //echo $dbparmeter->getNumberInkhmer(date("Y",strtotime($this->agreement['agreement_date'])));?></span>
	             					<br />
	             					<strong>មេឃុំ/ចៅសង្កាត់.</strong><span style="display: inline-block;width: 100px;border-bottom: dashed 1px #000;"></span>
	             				</td>
	             				<td width="50%" align="center">
	             					បានឃើញ និង បញ្ចាក់ថា<br />
	             					ស្នាមមេដៃខាងលើនេះ ពិតជាស្នាមមេដៃ<br />
	             					របស់ភាគីអ្នកលក់និងអ្នកទិញប្រាកដមែន<br />
	             					ធ្វើនៅ<span style="display: inline-block;width: 100px;border-bottom: dashed 1px #000;"></span>ថ្ងៃទី<span class="value" style="min-width:30px;"> <?php //echo $dbparmeter->getNumberInkhmer(date("d",strtotime($this->agreement['agreement_date'])));?></span>ខែ <span class="value" style="min-width:30px;"> <?php //echo $month[date("m",strtotime($this->agreement['agreement_date']))];?></span> ឆ្នាំ <span class="value" style="min-width:30px;"> ២០<?php //echo $dbparmeter->getNumberInkhmer(date("Y",strtotime($this->agreement['agreement_date'])));?></span>
	             					<br />
	             					<strong>មេភូមិ</strong><span style="display: inline-block;width: 100px;border-bottom: dashed 1px #000;"></span>
	             				</td>
	             			</tr>
	             		</table>
	             		<div style="height: 20px;">
	             		
	             		</div>
	             	</td>
	             </tr> 
	        </table>
	        <div id="printfooter" >
	        		<table  width="100%" style="background: none;border-top: 2px solid #000;font-family: 'Khmer OS Battambang'; font-size:10px;line-height: 15px;white-space:nowrap;"> 
						<tbody>
							<!-- 
							<tr style="white-space:nowrap;line-height: 12px;">
								<td width="40%"><?php //echo $this->keyValue['website'];?></td>
								<td width="40%" align="right"><?php //echo $this->keyValue['email_client'];?></td>
							</tr>
							 -->
							<tr style="white-space:nowrap;line-height: 15px;">
								<td><?php echo $this->keyValue['footer_branch'];?></td>
								<td width="40%" align="right"><?php echo $this->keyValue['tel-client'];?></td>
							</tr>
						</tbody>
					</table>
	        	</div>
        	</div>
        	
    	</div>
    </td>	
</tr>
</table>
</div>