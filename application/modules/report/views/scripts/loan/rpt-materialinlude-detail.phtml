<?php 
	$tr = Application_Form_FrmLanguages::getCurrentlanguage();
	$frm = $this->frm_search;
	$dbGB = new Application_Model_DbTable_DbGlobal();
	$format = new Application_Model_DbTable_DbGlobal();
	$logo = $this->baseUrl()."/images/logo.jpg";
	$branch_title = $tr->translate("BRAND_TITLE");
	$montFomat="d-m-Y";
	if(MONTH_FORMATE_DATE_RECEIPT==1){
		$montFomat="d-M-Y";
	}
	
	$images = $this->baseUrl().'/images/logo.png';
	if (!empty($this->rs['photo'])){
		$images = $this->baseUrl().'/images/projects/'.$this->rs['photo'];
	}
	$headerReportType = REPORT_LETER_HEAD;
	$classHideHeight="110px";
	if($headerReportType==2){
		$classHideHeight="125px";
	}
?>
<title><?php echo $tr->translate("MATERIAL_INCLUDE_DETAIL");?></title>
<script>
     dojo.require("dijit.form.DateTextBox");
</script>
	<div class="reportblog">
		<div class="card-box">
	       	<div class="col-sm-12 border-botom">
		   		<div class="col-sm-8 pd-0">
		    		<h4 class="m-b-0"><i class="fa fa-file" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;<?php echo $tr->translate('MATERIAL_INCLUDE_DETAIL');?></h4>
	    		</div>
	    		<div class="col-sm-4 text-right">
	    		</div>
	    	</div>
	    </div>
		
		<div style="width:100%; margin:0 auto;">
		<div style="min-height:22cm; margin:0 auto;">
			<style>
				.hideblog{display: block !important;;border: 1px solid #fff; border-bottom: 1px solid #000;}
				.hiddenblog{display: block !important;}
			</style>
			<div id="divPrint">
			<style>
				
				
				tr.style {
					   line-height: 25px; font-size:12px !important; padding:1px 0px; white-space: nowrap;height: 22px; 
						background: #c1d0f3;
					}
					.style th {
						text-align:center;
						font-family: 'Times New Roman','Khmer OS Muol Light';
						font-weight:normal;
					}
			ul.listData {
				padding: 0;
				margin: 0;
				list-style: none;
				font-family: 'Times New Roman','Khmer OS Battambang';
				font-size:14px;
			}
			ul.listData span.labelTitle {
				display: inline-block;
				min-width: 100px;
			}
			ul.listData span.valueData {
				display: inline-block;
				min-width: 100px;
				padding-left: 4px;
				font-weight: 600;
			}
			</style>
				<table width="100%" style="white-space: nowrap;font-size:16px;margin-top: 0px;" class="print" cellspacing="0"  cellpadding="0" >
					<tr>
				    	<td align="center" >
				        	<div class="divFooter">
					        	<?php echo $this->headerReport;?>
				            </div>
				        </td>
				    </tr>
				</table>
				<table width="100%" style="font-family:'Khmer OS Battambang';" style="margin:0; padding:23px;border:none;" >
		            	<tr style="line-height: 20px; font-size: 16px; font-family: Khmer OS Battambang;white-space: nowrap;">
							<td colspan="2" valign="top">
								<ul class="listData">
									<li>
										<span class="labelTitle">ឈ្មោះអតិថិជន</span>
										:<span class="valueData"><?php echo $this->rs['client_name'];?></span>
									</li>
									<li>
										<span class="labelTitle"><?php echo $tr->translate("PHONE");?></span>
										:<span class="valueData"><?php echo $this->rs['clientPhone'];?></span>
									</li>
								</ul>
							</td>
							<td colspan="2" valign="top">
								<ul class="listData">
									<li>
										<span class="labelTitle">គម្រោង</span>
										:<span class="valueData"><?php echo $this->rs['branch_name'];?></span>
									</li>
									<li>
										<span class="labelTitle"><?php echo $tr->translate("PROPERTY_TYPE");?></span>
										:<span class="valueData"><?php echo $this->rs['property_type'];?></span>
									</li>
									<li>
										<span class="labelTitle"><?php echo $tr->translate("លេខផ្ទះ");?></span>
										:<span class="valueData"><?php echo $this->rs['land_address']." ".$this->rs['street'];?></span>
									</li>
								</ul>
							</td>
							<td colspan="3">&nbsp;</td>
						</tr>
						
						<tr style="line-height: 15px; font-family: Khmer OS Battambang;">
							<td valign="top" colspan="7"></td>
						</tr>
		            	<tr>
		            	<td colspan="7" id="exportExcel">
							<table border="1" width="100%" style="font-family: 'Times New Roman','Khmer OS Battambang'; margin-top:10px; border-collapse:collapse; line-height: 24px; font-size: 14px; " >  
							   <thead>
									<tr class="style"   >
										<th align="center"><?php echo $tr->translate("NUM");?></th>
										<th align="center"><?php echo $tr->translate("ITEMS");?></th>
										<th align="center"><?php echo $tr->translate("DESCRIPTION");?></th>
										<th align="center"><?php echo $tr->translate("STATUS");?></th>
									</tr>
								</thead>
							   <?php  $i=0; $n=0; if(!empty($this->rows)){foreach($this->rows as $key =>$row) {$i++?>
								<tr style="font-size: 14px; line-height:26px; white-space: pre-line;" align="left">
								   <td align="center" width="5%" valign="top"><?php echo $i; ?>&nbsp;</td>
								   <td align="left" valign="top">&nbsp;<?php echo $row['itmesTitle']; ?></td>
								   <td align="left" valign="top">&nbsp;<?php echo $row['description'];?></td>
								   <td align="left" valign="top">&nbsp;<?php echo '<span style="float:right;">&nbsp;'.$row['isGiveLabel'].'</span>';?></td>
								</tr>
								<?php }}?>
							</table>
		            	</td>
		           		</tr>
		           		<tr class="head" style="font-weight: initial;font-family:'Khmer OS Muol Light';" >
						   <td colspan="7" align="center" >
						   <br />
						   		<label style=" margin-left: 55%; font-size:14px; line-height: 16px; font-weight: initial; font-family: 'Times New Roman','Khmer OS Battambang';">រាជធានីភ្នំពេញ ថ្ងៃទី <?php echo $format->getNumberInkhmer(date('d',strtotime($this->rs['for_date'])));?> ខែ <?php echo $format->getNumberInkhmer(date('m',strtotime($this->rs['for_date'])));?> ឆ្នាំ <?php echo $format->getNumberInkhmer(date('Y',strtotime($this->rs['for_date'])));?> </label><br>
						   		<label style=" margin-left: 55%; font-size:14px; line-height: 16px; font-weight: initial; font-family:'Khmer OS Muol Light';">ហត្ថលេខា</label><br>
						  		<label>&nbsp;</label><br>
						  		<label>&nbsp;</label><br>
						  		<label>&nbsp;</label><br>
						  		<label style=" margin-left: 55%; font-size:14px; line-height: 16px; font-weight: initial; font-family:'Khmer OS Muol Light';"><?php echo $this->rs['client_name'];?></label>
						   </td>
						</tr>
						
		          </table>
			</div>
		</div>
	</div>
</div>
<script>
require(["dojo/ready"], function(ready){
	ready(function(){
		 getBranchInfo();
		 document.getElementById('companyTitle').innerHTML = '<?php echo $branch_title; ?>';
		 document.getElementById('reportTitle').innerHTML = '<?php echo $tr->translate("MATERIAL_INCLUDE_DETAIL");?>';
		 document.getElementById('dateReport').innerHTML = '&nbsp;';
	});
});

function getBranchInfo(){
	var url_submit = '<?php echo $this->url(array('module'=>'loan','controller'=>'ilpayment','action'=>'getbranch')); ?>';
	branch_id = '<?php echo empty($this->rs['branch_id'])?0:$this->rs['branch_id'];?>';
	if(branch_id=="" || branch_id<=0){
		return false;
	}
	dojo.xhrPost({
	    url: url_submit,	
	    content:{ 
		    'branch_id':branch_id
		},	
		load: function(data) {
			var arr = JSON.parse(data);
			var imagesUrl = '<img  style="height:85px; max-width: 100%;" src="'+arr.url_logo+'" />';
			document.getElementById('projectlogo').innerHTML = imagesUrl;	
			
			<?php if($headerReportType==2){?>
			document.getElementById('projectName').innerHTML = '('+arr.project_name+')';
			<?php }else{?>
			document.getElementById('projectName').innerHTML = arr.project_name;
			<?php }?>
		},
		error: function(e) {
		}
	});
}
</script>