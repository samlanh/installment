<?php
$tr = Application_Form_FrmLanguages::getCurrentlanguage();
$baseurl =  Zend_Controller_Front::getInstance()->getBaseUrl();
$frm = $this->frm_expense;
$rs= $this->rows;
?>
<script src="<?php echo $baseurl;?>/js/help.js"></script>
<title><?php echo $tr->translate("EDIT_OTHER_EXPENSE")?></title>
<style>	
.fullside {
	width: 100%;
	height: 30px;
}
#lbl_header {
    display: initial !important;
}
table.collape tbody td {
    padding: 2px;
    border-bottom: solid 1px #eee;
}
.nomargin{
	margin-top:0px !important;
}
</style>
 <script>
	require(["dijit/form/DateTextBox","dijit/form/NumberTextBox"]);
 </script>
<div class="card">
	<div class="card-content collapse show">
		<form id='office_receipt' action="<?php echo $this->url(array('module'=>'po','controller'=>'expense','action'=>'edit')); ?>" dojoType="dijit.form.Form" method="post" enctype="application/x-www-form-urlencoded">
			<script type="dojo/method" event="onSubmit">	
				if(this.validate()) {
					condition = checkValidateAddRow();
					if(condition==false){
						alert("<?php echo $tr->translate('PLEASE_SELECT_CATEGORY_EXPENSE');?> !!! ");
						return false;
					}
					loadingBlock();
					return true;
				}else {
					return false;
				}
			</script>
			<div class="card-box">
	             <div class="col-sm-12 border-botom">
			    	<div class="col-sm-8 pd-0">
			    		<h4 class="m-b-0"><i class="fa fa-money" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;<?php echo $tr->translate('EDIT_OTHER_EXPENSE');?></h4>
	    			</div>
	    			<div class="col-sm-4 text-right">
	    			</div>
	    		</div>
	    	</div>
	    	<div class="card-box">
	        	<div class="col-md-5 col-sm-5 col-xs-12">
					<div class="card-blogform">
						<div class="card-body"> 
							<div class="row"> 
								<div class="col-md-12 col-sm-12 col-xs-12">
									<div class="d-flex "> 
										<div class="settings-main-icon ">
											<i class="glyphicon glyphicon-usd" aria-hidden="true"></i>
										</div> 
										<div class="col-md-10 col-sm-10 col-xs-12"> 
											<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("EXPENSE_INFO");?></p>
										</div> 
									</div>
									<div class="col-md-12 col-sm-12 col-xs-12">

									</div>
									<div class="form-group">
										<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("BRANCH_NAME");?> <span class="required">*</span>:
										</label>
										<div class="col-md-7 col-sm-7 col-xs-12">
											<?php echo $frm->getElement('branch_id');?>
											<?php echo $frm->getElement('id');?>
										</div>
									</div>
									<div class="form-group">
										<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("RECEIPT_NO");?> :
										</label>
										<div class="col-md-7 col-sm-7 col-xs-12">
											<?php echo $frm->getElement('paymentNo');?>
										</div>
									</div>
									<div class="form-group">
										<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("INVOICE");?> :
										</label>
										<div class="col-md-7 col-sm-7 col-xs-12">
												<?php echo $frm->getElement('externalInvoice');?>
										</div>
									</div>
									<div class="form-group">
										<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("EXPENSE_TITLE");?> <span class="required">*</span>:
										</label>
										<div class="col-md-7 col-sm-7 col-xs-12">
												<?php echo $frm->getElement('expenseTitle');?>
										</div>
									</div>
									<div class="form-group">
											<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("RECEIVER");?> :
											</label>
											<div class="col-md-7 col-sm-7 col-xs-12">
												<?php echo $frm->getElement('receiver');?>
											</div>
									</div>
									<div class="form-group">
										<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("NOTE");?> :
										</label>
										<div class="col-md-7 col-sm-7 col-xs-12">
												<input type="hidden" id="identity" name="identity" />
												<?php echo $frm->getElement('note');?>
										</div>
									</div>
									<div class="form-group">
										<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("STATUS");?> :
										</label>
										<div class="col-md-7 col-sm-7 col-xs-12">
												<?php echo $frm->getElement('status');?>
										</div>
									</div>
									
								</div>
							</div>
						</div>
					</div>

	             </div>

	             <div class="col-md-5 col-sm-5 col-xs-12">
					 <div class="card-blogform">
						<div class="card-body"> 
								<div class="row"> 
									<div class="col-md-12 col-sm-12 col-xs-12">
											<div class="d-flex "> 
												<div class="settings-main-icon ">
													<i class="material-icons-outlined">payments</i>
												</div> 
												<div class="col-md-10 col-sm-10 col-xs-12"> 
													<p class="tx-20 font-weight-semibold d-flex "><?php echo $tr->translate("PAYMENT_INFO");?></p>
												</div> 
											</div>
											<div class="form-group">
												<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("PAYMENT_METHOD");?> :
												</label>
												<div class="col-md-7 col-sm-7 col-xs-12">
													<?php echo $frm->getElement('paymentMethod');?>
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("BANK");?> :
												</label>
												<div class="col-md-7 col-sm-7 col-xs-12">
													<?php echo $frm->getElement('bankId');?>
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("ACCOUNT_AND_CHEQUE_NO");?> :
												</label>
												<div class="col-md-7 col-sm-7 col-xs-12">
													<?php echo $frm->getElement('accNameAndChequeNo');?>
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("TOTAL_EXPENSE");?> <span class="required">*</span>:
												</label>
												<div class="col-md-7 col-sm-7 col-xs-12">
														<?php echo $frm->getElement('totalAmount');?>
												</div>
											</div>

											<div class="form-group">
												<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("DATE");?> <span class="required">*</span>:
												</label>
												<div class="col-md-7 col-sm-7 col-xs-12">
														<?php echo $frm->getElement('paymentDate');?>
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("BUDGET_TYPE");?> <span class="required">*</span>:
												</label>
												<div class="col-md-7 col-sm-7 col-xs-12">
													<input id="budgetType" />
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-md-5 col-sm-5 col-xs-12" ><?php echo $tr->translate("BUDGET_ITEM");?> <span class="required">*</span>:
												</label>
												<div class="col-md-4 col-sm-4 col-xs-12">
														<?php echo $frm->getElement('budgetItem');?>
												</div>
												<div class="col-md-3 col-sm-3 col-xs-12">
													<input type="button" class="button-class button-primary" iconClass="glyphicon glyphicon-refresh" dojoType="dijit.form.Button" onclick="getRefreshData();" label="<?php echo $tr->translate("GET_DATA");?>"  /> 
												</div>
											</div>
											
										</div>
									</div>
								</div>
							</div>

	             </div>
	        </div>
	        <div class="clearfix"></div>
	        <div class="card-box mb-20">
	        	<div class="col-md-12 col-sm-12 col-xs-12 ">
	        		<table id="table_row" style="border-collapse: collapse; border:1px solid #ccc;white-space: nowrap;width:100%;">
						<tr id="head-title" class="head-td" align="right"></tr>
					</table>
	        	</div>
	        	<div class="col-md-12 col-sm-12 col-xs-12 ">
	        		<input type="button" class="button-class button-primary" iconClass="glyphicon glyphicon-sort-by-attributes" label="<?php echo $tr->translate('ADD_EXPENSE');?>" dojoType="dijit.form.Button" 
						 	   onclick="addRow();" />
	        	</div>
	        </div>
	        <div class="clearfix"></div>
	         <div class="card-box mt-20">
               	<div class="col-md-12 col-sm-12 col-xs-12 border-top mt-20 ptb-10 text-center">
					<input type="submit" label="<?php echo $tr->translate("SAVECLOSE");?>" id='saveclose' name='saveclose' value='saveclose' dojoType="dijit.form.Button"
						 class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-disk" />
						 <input type="submit" label="<?php echo $tr->translate("SAVENEW");?>" id='savenew' name='savenew' value='savenew' dojoType="dijit.form.Button"
						 class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-disk-saved" />
               	</div>
             </div>
		</form>
	</div>
</div>


<iframe name=print_frame width=0 height=0 frameborder=0 src=about:blank></iframe>	
<script src="<?php echo $this->baseUrl();?>/admin/js/global.js"  type="text/javascript"></script>
<script type="text/javascript">
	dojo.require("dijit.form.Textarea");
	dojo.require("dojo.data.ItemFileWriteStore");  
	dojo.require("dojo.NodeList-manipulate");
	dojo.require("dojo.data.ObjectStore");
	dojo.ready(function(){

		initialize();
	});
	function hideDialog(){
		dijit.byId('terms').hide();
	}

	function deleteRecord(index) {
		var identity = $('#identity').val();
		var arrays = identity.split(',');
		for(var i=0;i<arrays.length;i++) {
		if(arrays[i] == index) arrays.splice(i,1);
		}
		var strings = arrays.join(',');
		$('#identity').val(strings);
		dojo.query("#row"+index).remove();
		netTotal();
	}
	function calculateTotal(index){
		netTotal();
	}
	function netTotal(){ 
		var netTotal=0;
		var rowId = $('#identity').val();
		var rowIDArray = rowId.split(',');
		for(var n = 0; n < rowIDArray.length; n++) {
			netTotal += dijit.byId('total_'+rowIDArray[n]).get('value');
		}
		dijit.byId('totalAmount').attr('value',netTotal);
	}
	 
	var template = '';
	var service = '';
	var col = 0;
	var no = 0;
	var title = 0;
	tmp = '';
	temp='';
	optexpense = '<?php echo $this->expenseopt;?>';
	function addRow(){ 
			col++;no++;
			template='';
			if(title!=1){  
				temp+='<th><?php echo $tr->translate("DEL");?></th>';
				temp+='<th><?php echo $tr->translate("N_O");?></th>';
				temp+='<th id="lbl_titlemetion" width="100px"><?php echo $tr->translate("CATE_EXPENSE");?></th>';
				temp+='<th id="lbl_titlemetion" width="100px"><?php echo $tr->translate("PRICE");?><span class="required">*</span></th>';
				temp+='<th id="lbl_titlemetion" width="100px"><?php echo $tr->translate("QTY");?><span class="required">*</span></th>';
				temp+='<th id="lbl_titlemetion" width="150px"><?php echo $tr->translate("TOTAL");?></th>';
				temp+='<th><?php echo $tr->translate("REMARK");?></th>';
				dojo.query("#head-title").append(temp);
				title=1;
			}
			template+='<td width="47px" align="center"><img onclick="deleteRecord('+col+');calculateTotal('+col+');calculatePaidAmount('+col+');" src="<?php echo $this->baseUrl();?>/images/Delete_16.png"></td>';
			template+='<td width="50px" align="center">'+no+'</td>';
			template+='<td style="width:300px"><select style="width:100%" onchange="popupCateExpense('+col+');" dojoType="dijit.form.FilteringSelect" id="cate_expense_id_'+col+'" name="cate_expense_id_'+col+'">'+optexpense+'</select></td>';	
			template+='<td><input type="text" required="1" onkeyup="calculateTotal('+col+');" name="price_'+col+'" id="price_'+col+'"  dojoType="dijit.form.NumberTextBox" style="width:120px;" /></td>';	
			template+='<td><input type="text" required="1" onkeyup="calculateTotal('+col+',1);" name="qty_'+col+'" id="qty_'+col+'" dojoType="dijit.form.NumberTextBox" style="width:120px;" /></td>';
			template+='<td><input type="text" onkeyup="calculateTotal('+col+');" readonly="readonly" name="total_'+col+'" id="total_'+col+'" dojoType="dijit.form.NumberTextBox" style="width:150px;" /></td>';		
			template+='<td><input type="text" name="remark_'+col+'" id="remark_'+col+'" dojoType="dijit.form.TextBox" placeholder="<?php echo $tr->translate("NOTE");?>" style="width:100%;" /><label id="subsub"></label></td>';
			tmp='<tr id="row'+col+'">';
			tmp+="</tr>";
			dojo.query("#table_row").append(tmp);
			if($("#identity").val()!="") {
				var identity = $("#identity").val();
				$("#identity").val(identity+','+col);
			} else {$("#identity").val(col);}
			dojo.html.set(dojo.byId("row"+col),template , {
				 parseContent: true,
			});
	 }

	function calculateTotal(index,type){
			price = dijit.byId('price_'+index).get('value');
			price = isNaN(price)?0:price;
			
			qty = dijit.byId('qty_'+index).get('value');
			qty = isNaN(qty)?0:qty;
			
			dijit.byId('total_'+index).attr('value',price * qty);
			
			dijit.byId('totalAmount').attr('value',netTotal);	
			netTotal();
	}


	function checkValidateAddRow(){
		var rowId = $('#identity').val();
		if(rowId!=''){
			var rowIDArray = rowId.split(',');
			for(var n = 0; n < rowIDArray.length; n++) {
				expense = dijit.byId('cate_expense_id_'+rowIDArray[n]).get('value');
				if(expense<=0){
					return false;
				}
			}
		}
	}

	function initialize(){ 

		<?php if (!empty($rs)) foreach ($rs as $key=> $row){?>

			col++;no++;
			template='';
			if(title!=1){  
				temp+='<th><?php echo $tr->translate("DEL");?></th>';
				temp+='<th><?php echo $tr->translate("N_O");?></th>';
				temp+='<th id="lbl_titlemetion" width="100px"><?php echo $tr->translate("CATE_EXPENSE");?></th>';
				temp+='<th id="lbl_titlemetion" width="100px"><?php echo $tr->translate("PRICE");?><span class="required">*</span></th>';
				temp+='<th id="lbl_titlemetion" width="100px"><?php echo $tr->translate("QTY");?><span class="required">*</span></th>';
				temp+='<th id="lbl_titlemetion" width="150px"><?php echo $tr->translate("TOTAL");?></th>';
				temp+='<th><?php echo $tr->translate("REMARK");?></th>';
				dojo.query("#head-title").append(temp);
				title=1;
			}
			template+='<td width="47px" align="center"><img onclick="deleteRecord('+col+');calculateTotal('+col+');calculatePaidAmount('+col+');" src="<?php echo $this->baseUrl();?>/images/Delete_16.png"></td>';
			template+='<td width="50px" align="center">'+no+'<input type="hidden" dojoType="dijit.form.TextBox" class="fullside" id="detailId'+col+'" name="detailId'+col+'" value="<?php echo $row['id'];?>" type="text"  > </td>';
			template+='<td style="width:300px"><select style="width:100%" onchange="popupCateExpense('+col+');" dojoType="dijit.form.FilteringSelect" id="cate_expense_id_'+col+'" name="cate_expense_id_'+col+'">'+optexpense+'</select></td>';	
			template+='<td><input type="text" required="1" onkeyup="calculateTotal('+col+');" name="price_'+col+'" id="price_'+col+'"  dojoType="dijit.form.NumberTextBox" style="width:120px;" /></td>';	
			template+='<td><input type="text" required="1" onkeyup="calculateTotal('+col+',1);" name="qty_'+col+'" id="qty_'+col+'" dojoType="dijit.form.NumberTextBox" style="width:120px;" /></td>';
			template+='<td><input type="text" onkeyup="calculateTotal('+col+');" readonly="readonly" name="total_'+col+'" id="total_'+col+'" dojoType="dijit.form.NumberTextBox" style="width:150px;" /></td>';		
			template+='<td><input type="text" name="remark_'+col+'" id="remark_'+col+'" dojoType="dijit.form.TextBox" placeholder="<?php echo $tr->translate("NOTE");?>" style="width:100%;" /><label id="subsub"></label></td>';
			tmp='<tr id="row'+col+'">';
			tmp+="</tr>";
			dojo.query("#table_row").append(tmp);
			if($("#identity").val()!="") {
				var identity = $("#identity").val();
				$("#identity").val(identity+','+col);
			} else {$("#identity").val(col);}
			dojo.html.set(dojo.byId("row"+col),template , {
				 parseContent: true,
			});

			dijit.byId('cate_expense_id_'+col).attr('value',"<?php echo $row['cateExpenseId'];?>");
			dijit.byId('qty_'+col).attr('value',"<?php echo $row['qty'];?>");
			dijit.byId('price_'+col).attr('value',"<?php echo $row['price'];?>");
			dijit.byId('total_'+col).attr('value',"<?php echo $row['total'];?>");
			dijit.byId('remark_'+col).attr('value','<?php echo $row["note"];?>');

		<?php } ?>
	 }

	function popupCateExpense(index){
		dijit.byId("ex_save_new").attr("disabled",false);
		expense_id = dijit.byId("cate_expense_id_"+index).get('value');
		$("#tow_value").val(index);
		if(expense_id==-1){
			dijit.byId("popup_cate_expense").show();
		}
	}

	var cate_expense_store  = getDataStorefromJSON('id','name',<?php print_r(Zend_Json::encode($this->cate_expense));?> );
	var url_add_cate_expense = '<?php echo $this->url(array("module"=>"po","controller"=>"expense","action"=>"add-cate-expense")); ?>';
	function addCateExpense(){
		if(dijit.byId('add_cate_expense').validate()) {
			dijit.byId("ex_save_new").attr("disabled",true);
			dojo.xhrPost({
				url:url_add_cate_expense,
				form: dojo.byId("add_cate_expense"),
				handleAs:"json",
				load: function(data){
					var Itemmake = {
							id: data.id,
							name: dijit.byId('account_name').get('value')
						};
					index=$("#tow_value").val();
					addDataToSelectbox(dijit.byId('cate_expense_id_'+index), cate_expense_store, Itemmake, data.id);
					optexpense = data.new_array;
					dijit.byId('add_cate_expense').reset();
					dijit.byId("popup_cate_expense").hide();
				},
				error: function(err) {
					alert(err);
				}
			});
		}
	}
</script>
<div class="dijitHidden">
	<div data-dojo-type="dijit.Dialog" style="width:30%;" id="popup_cate_expense" >
		<form  name='add_subject_exam' id='add_cate_expense'  dojoType="dijit.form.Form" method="post" enctype="application/x-www-form-urlencoded">
			<table cellspacing="10" width="100%" style="margin: 0 auto;">
				<tr>
					<td>
						<fieldset >
							<legend align="center" style="font-size: 18px;"><strong><?php echo $tr->translate("ADD_CATE_EXPENSE");?></strong></legend>
							<table style="margin: 0 auto; width: 95%;white-space: nowrap; line-height: 35px;" cellspacing="10">
								<tr>
									<td><?php echo $tr->translate("TITLE")?></td>
									<td>
										<input name="account_name" id="account_name" dojoType="dijit.form.ValidationTextBox" required="required" class="fullside" />
									</td>
								</tr>
								<tr>
									<td><?php echo $tr->translate("PARENT")?></td>
									<td>
										<select name="parent" id="parent"  dojoType="dijit.form.FilteringSelect" class="fullside" >
											<option value=""></option>
											<?php if(!empty($this->parent)){foreach($this->parent as $parent){?>
											<option value="<?php echo $parent['id']?>"><?php echo $parent['name']?></option>
											<?php }}?>
										</select>
									</td>
								</tr>
								<tr>
									<td><?php echo $tr->translate("ACCOUNT_CODE")?></td>
									<td>
										<input name="account_code" id="account_code" dojoType="dijit.form.TextBox" required="required" class="fullside" />
									</td>
								</tr>
								<tr>
									<td colspan="2" align="center">
										<input type="button" onclick="addCateExpense();" value="save_new" name="ex_save_new"  id="ex_save_new" label="<?php echo $tr->translate('SAVE');?>" dojoType="dijit.form.Button" 
										class="button-class button-primary" iconClass="glyphicon glyphicon-floppy-saved" />
									</td>
								</tr>
							</table>	
						</fieldset>		
					</td>
				</tr>
			</table>	
			<input type="hidden"  name="tow_value" id="tow_value" value="" />
 		</form>
	</div>
</div>
<script>
require(["dojo/ready"], function(ready){
	ready(function(){
	
		getBudgetType();
		onChageFunctionByBranch();
		new dijit.form.FilteringSelect({
			autoComplete: false,
			queryExpr: "*${0}*",
			required: false,		           
			name: "budgetType",
			placeHolder:'budgetType',
			id: "budgetType",
			searchAttr: "name",
			class: 'fullside',
			onChange: function() {
				getBudgetItem();
			}
		}, "budgetType");
		
	});
});	


function getBudgetType(){
			urlGetBudgetType ='<?php echo $this->url(array('module'=>'budget','controller'=>'type','action'=>'getbudgettype'))?>';
			contentData = {
					'noBtnNew':'1',
	    	};
			getAllBudgetType(urlGetBudgetType,contentData);
	    }
function getBudgetItem(){
			dijit.byId('budgetItem').attr('value', '');
			budgetType = dijit.byId('budgetType').get('value');
			if(budgetType){
	    		urlGetBudgetItem = '<?php echo $this->url(array('module'=>'budget','controller'=>'item','action'=>'get-allbudgetitem'));?>';
				contentData = {
		    		'budgetType':budgetType,
		    	};
				getAllBudgetItem(urlGetBudgetItem,contentData);
	       }
 }

 function addNewBudgetItem(){
		budgetItem = dijit.byId('budgetItem').get('value');
		if(budgetItem==-1){
			window.open('<?php echo $this->baseUrl();?>/budget/item/add?isAddBudgetItem=1');
			dijit.byId('budgetItem').reset();
		}
	}
	function getRefreshData(){
		
		urlGetBudgetItem = '<?php echo $this->url(array('module'=>'budget','controller'=>'item','action'=>'get-allbudgetitem'));?>';
		getAllBudgetItem(urlGetBudgetItem);
	}

function onChageFunctionByBranch(){
		
		getPaymentNoByBranch();
		enablePayment();

	}

	function enablePayment(){
		paymentMethod = dijit.byId('paymentMethod').get('value');
		dijit.byId("bankId").set("readOnly",false);
		dijit.byId("bankId").reset();
		dijit.byId("accNameAndChequeNo").set("readOnly",false);
		///dijit.byId("accNameAndChequeNo").attr("value",'');
		if(paymentMethod==1){
			dijit.byId("bankId").set("readOnly",true);
			dijit.byId("accNameAndChequeNo").attr("value",'N/A');
			dijit.byId("accNameAndChequeNo").set("readOnly",true);
		}else{
			dijit.byId("accNameAndChequeNo").set("readOnly",false);
			
		}
	}

	var urlGetPaymentNo = '<?php echo $this->url(array('module'=>'invpayment','controller'=>'payment','action'=>'getpaymentno')); ?>';
	function getPaymentNoByBranch(){
		
		branch_id = dijit.byId('branch_id').get('value');
		if(branch_id=='' || branch_id<=0){
			return false;
		}
		paymentDate = dijit.byId('paymentDate').get('value');
		if(paymentDate==''){
			infoMessageAlert('<?php echo $tr->translate('PLEASE_SELECT_DATE');?>');
			dijit.byId('paymentDate').focus();
			return false;
		}
			var a = new Date(paymentDate);
			mm = a.getMonth()+1;
			var dd = a.getDate();
			 if(dd<10){
				 dd = "0"+dd;
			}
			//month = returnMOnth(mm);
			month=mm;
			if(mm<10){
				 month = "0"+mm;
			}
			
			var y = a.getFullYear();
			var paymentDate = dd +'-'+month+'-'+y ;
	
		dojo.xhrPost({
			url:urlGetPaymentNo,	
			content:{ 
				'branch_id':branch_id,'paymentDate':paymentDate
			},		    
			handleAs:"json",
			load: function(data) {
				dijit.byId('paymentNo').set('value', data);
			},
			error: function(err) {
			}
		});
	} 	

</script>